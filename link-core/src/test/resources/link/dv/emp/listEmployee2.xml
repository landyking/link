<?xml version="1.0" encoding="UTF-8"?>
<directive xmlns="http://www.github.com/landyking/link"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.github.com/landyking/link http://www.github.com/landyking/link/link-1.0.xsd">
    <description>列出雇员信息</description>
    <input>
        <param name="firstName">
            <processors>
                <TextToList/>
            </processors>
        </param>
    </input>
    <execution>
        <custom id="cst" className="com.github.landyking.link.execution.custom.HelloCustom">
            <prop name="name">你好</prop>
        </custom>
        <dbSelect id="default" dataSource="emp">
            <field tableAlias="ep" column="emp_no" columnAlias="empNo" desc="员工序号"/>
            <field column="birth_date" columnAlias="birthDate" tableAlias="ep" desc="生日"/>
            <field column="first_name" tableAlias="ep"/>
            <field column="last_name"/>
            <field tableAlias="ep" column="gender"/>
            <field tableAlias="de" column="dept_no" columnAlias="deptNo"/>
            <from>
                <base table="employees" prefix="employees" alias="ep"/>
                <join type="left" table="dept_emp" alias="de">
                    <on>ep.emp_no=de.emp_no</on>
                </join>
            </from>
            <where>
                1=1
                <!--<![CDATA[-->
                <!--<#trim>-->
                <!--and ep.first_name in (:firstName)-->
                <!--</#trim>-->
                <!--]]>-->
            </where>
            <other>
                order by ep.emp_no asc
            </other>
        </dbSelect>
    </execution>
    <executionEnding/>
    <output>
        <list name="root">
            <param name="lastName" from="[exec][default].data.![#this[last_name]]" desc="姓"/>
            <param name="firstName" from="[exec][default].data.![#this[first_name]]" desc="名"/>
            <param name="test" from="new java.util.ArrayList([exec][default].data)" default="2" desc="test">
                <processors>
                    <DateTimeGenerator/>
                    <DateTimeConverter srcType="auto" destType="string" destFmt="yyyy-MM-dd HH:mm:ss"/>
                </processors>
            </param>
            <!--<param name="deptNo" from="#"/>-->
            <param name="deptName" from="[exec][default].data.![#this[deptNo]]">
                <processors>
                    <QueryTranslator queryDataSource="emp" table="departments"
                                     destField="dept_no" displayField="dept_name">
                        <where>1=1</where>
                    </QueryTranslator>
                </processors>
            </param>
        </list>
    </output>
    <resultRender/>
    <dependencys></dependencys>
</directive>